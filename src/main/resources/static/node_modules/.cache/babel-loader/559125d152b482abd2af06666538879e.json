{"ast":null,"code":"import _regeneratorRuntime from\"/Users/davidnogueira/Desktop/TwitProject/src/main/resources/static/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/davidnogueira/Desktop/TwitProject/src/main/resources/static/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _toConsumableArray from\"/Users/davidnogueira/Desktop/TwitProject/src/main/resources/static/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/davidnogueira/Desktop/TwitProject/src/main/resources/static/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useContext}from\"react\";import{SelectSymbolsDiv,SymbolInput,AddSymbolBtn,SymbolTagsDiv,TagDiv,SymbolName,TagsHeader,InputDiv,FormError,TweetCounter}from\"./SelectSymbolsStyles\";import axios from\"axios\";import{Context}from\"../../App\";var SelectSymbols=function SelectSymbols(){var context=useContext(Context);var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),currentSymbol=_useState2[0],setCurrentSymbol=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),allSymbols=_useState4[0],setAllSymbols=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),compErrors=_useState6[0],setCompErrors=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),tweets=_useState8[0],setTweets=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),tweetCounter=_useState10[0],setTweetCounter=_useState10[1];var handleInputChange=function handleInputChange(event){var newValue=event.currentTarget.value.toUpperCase();if(newValue.length>5){return;}setCurrentSymbol(newValue);};var handleDeleteTag=function handleDeleteTag(deletedSymbol){var newSymbols=allSymbols.filter(function(symbol){return symbol!==deletedSymbol;});setAllSymbols(newSymbols);var newTweets=tweets.filter(function(tweet){return tweet.symbol!==deletedSymbol;});context.dispatch({type:\"UPDATE_TWEETS\",payload:_toConsumableArray(newTweets)});setTweets(_toConsumableArray(newTweets));var newTweetCounter=tweetCounter.filter(function(counter){return counter.symbol!==deletedSymbol;});setTweetCounter(newTweetCounter);};var handleAddNewSymbol=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,newTweets;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setCompErrors([]);if(!allSymbols.includes(currentSymbol)){_context.next=4;break;}setCompErrors([].concat(_toConsumableArray(compErrors),[\"repeat\"]));return _context.abrupt(\"return\");case 4:if(!(currentSymbol.length>2&&currentSymbol.length<6)){_context.next=15;break;}_context.prev=5;_context.next=8;return axios.get(\"/get-tweets-by-symbol?symbol=\".concat(currentSymbol));case 8:response=_context.sent;if(response.status===200){newTweets=[].concat(_toConsumableArray(response.data.messages),_toConsumableArray(tweets));context.dispatch({type:\"UPDATE_TWEETS\",payload:newTweets});setTweets(newTweets);setTweetCounter([].concat(_toConsumableArray(tweetCounter),[{symbol:currentSymbol,mentions:response.data.messages.length}]));setAllSymbols([].concat(_toConsumableArray(allSymbols),[currentSymbol]));}_context.next=15;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](5);setCompErrors([].concat(_toConsumableArray(compErrors),[\"not200\"]));case 15:setCurrentSymbol(\"\");case 16:case\"end\":return _context.stop();}}},_callee,null,[[5,12]]);}));return function handleAddNewSymbol(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(SelectSymbolsDiv,null,/*#__PURE__*/React.createElement(InputDiv,null,/*#__PURE__*/React.createElement(SymbolInput,{type:\"text\",value:currentSymbol,onChange:function onChange(event){handleInputChange(event);}}),/*#__PURE__*/React.createElement(AddSymbolBtn,{href:\"\",onClick:function onClick(event){event.preventDefault();handleAddNewSymbol();}},\"Add Symbol\")),compErrors.includes(\"repeat\")&&/*#__PURE__*/React.createElement(FormError,null,\"You already added that symbol.\"),compErrors.includes(\"not200\")&&/*#__PURE__*/React.createElement(FormError,null,\"Ops! Something went wrong. Try again.\"),allSymbols.length>0&&/*#__PURE__*/React.createElement(TagsHeader,null,\"Tags You Have Selected:\"),/*#__PURE__*/React.createElement(SymbolTagsDiv,null,allSymbols.length>0&&allSymbols.map(function(symbol){var counter=tweetCounter.find(function(count){return count.symbol===symbol;});return/*#__PURE__*/React.createElement(TagDiv,{href:\"\",onClick:function onClick(event){event.preventDefault();handleDeleteTag(symbol);}},/*#__PURE__*/React.createElement(SymbolName,null,symbol,\" \",/*#__PURE__*/React.createElement(TweetCounter,null,counter&&counter.mentions,\" / 10\")));})));};export default SelectSymbols;","map":{"version":3,"sources":["/Users/davidnogueira/Desktop/TwitProject/src/main/resources/static/src/Components/SelectSymbols/SelectSymbols.tsx"],"names":["React","useState","useContext","SelectSymbolsDiv","SymbolInput","AddSymbolBtn","SymbolTagsDiv","TagDiv","SymbolName","TagsHeader","InputDiv","FormError","TweetCounter","axios","Context","SelectSymbols","context","currentSymbol","setCurrentSymbol","allSymbols","setAllSymbols","compErrors","setCompErrors","tweets","setTweets","tweetCounter","setTweetCounter","handleInputChange","event","newValue","currentTarget","value","toUpperCase","length","handleDeleteTag","deletedSymbol","newSymbols","filter","symbol","newTweets","tweet","dispatch","type","payload","newTweetCounter","counter","handleAddNewSymbol","includes","get","response","status","data","messages","mentions","preventDefault","map","find","count"],"mappings":"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","sourcesContent":["import React , {FC, useState, useContext, useEffect} from \"react\";\nimport { \n    SelectSymbolsDiv,\n    SymbolInput, \n    AddSymbolBtn, \n    SymbolTagsDiv, \n    TagDiv, \n    SymbolName, \n    TagsHeader, \n    InputDiv, \n    FormError, \n    TweetCounter\n} from \"./SelectSymbolsStyles\";\nimport axios from \"axios\"\nimport { Context } from \"../../App\";\nimport { ITweet, ITweetCounter } from \"../../interfaces\";\n\nconst SelectSymbols:FC = ():JSX.Element => {\n  const context = useContext(Context);\n  const [currentSymbol , setCurrentSymbol] = useState<string>(\"\");\n  const [allSymbols , setAllSymbols] = useState<string[]>([]);\n  const [compErrors , setCompErrors] = useState<string[]>([]);\n  const [tweets , setTweets] = useState<ITweet[]>([]);\n  const [tweetCounter , setTweetCounter] = useState<ITweetCounter[]>([]);\n    \n    const handleInputChange = (event: React.FormEvent<HTMLInputElement>) => {\n            const newValue = event.currentTarget.value.toUpperCase();\n            if (newValue.length > 5){\n                return;\n            }\n            setCurrentSymbol(newValue);\n    }\n\n    const handleDeleteTag = (deletedSymbol: string) => {\n      const newSymbols = allSymbols.filter(symbol => symbol !== deletedSymbol)\n\t\t  setAllSymbols(newSymbols);\n\t\tconst newTweets = tweets.filter(tweet => tweet.symbol !== deletedSymbol);\n\t\t\tcontext.dispatch({\n\t\t\t\ttype: \"UPDATE_TWEETS\" ,\n\t\t\t\tpayload : [...newTweets]\n\t\t\t})\n        setTweets([...newTweets])\n                \n        const newTweetCounter = tweetCounter.filter(counter => counter.symbol !== deletedSymbol);\n        setTweetCounter(newTweetCounter);\n    }\n\n    const handleAddNewSymbol = async () => {\n        setCompErrors([]);\n        if (allSymbols.includes(currentSymbol)){\n            setCompErrors([...compErrors , \"repeat\"])\n            return;\n        }\n        if (currentSymbol.length > 2 && currentSymbol.length < 6){\n            try{\n\t\t\t\t\t\t\tconst response = await axios.get(`/get-tweets-by-symbol?symbol=${currentSymbol}`)\n            \tif (response.status === 200){\n\t\t\t\t\t\t\t\tconst newTweets = [...response.data.messages , ...tweets ];\n\t\t\t\t\t\t\t\tcontext.dispatch({\n\t\t\t\t\t\t\t\ttype: \"UPDATE_TWEETS\" , \n\t\t\t\t\t\t\t\tpayload : newTweets\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\tsetTweets(newTweets);\n\t\t\t\t\t\t\t\t\t\tsetTweetCounter([...tweetCounter , {symbol : currentSymbol , mentions : response.data.messages.length}])\n                    setAllSymbols([...allSymbols , currentSymbol ])\n\t\t\t\t\t\t\t\t\t}} \n\t\t\t\t\t\t\tcatch (error) {\n\t\t\t\t\t\t\t\tsetCompErrors([...compErrors , \"not200\"])\n\t\t\t\t\t\t\t}\n        }\n        setCurrentSymbol(\"\")\n    }\n\n    return (\n        <SelectSymbolsDiv>\n            <InputDiv>\n                <SymbolInput type =\"text\" value={currentSymbol} onChange={(event:React.FormEvent<HTMLInputElement>) => {handleInputChange(event)}}/>\n                <AddSymbolBtn href=\"\" onClick={(event:React.MouseEvent<HTMLAnchorElement>) => {event.preventDefault(); handleAddNewSymbol();}}>\n                    Add Symbol\n                </AddSymbolBtn>\n            </InputDiv>\n            {\n                compErrors.includes(\"repeat\") && <FormError>You already added that symbol.</FormError>\n            }\n            {\n                compErrors.includes(\"not200\") && <FormError>Ops! Something went wrong. Try again.</FormError>\n            }\n\t\t\t\t\t\t {\n                allSymbols.length > 0 && <TagsHeader>Tags You Have Selected:</TagsHeader>\n            }\n            <SymbolTagsDiv>\n                {\n                    allSymbols.length > 0 &&\n                    allSymbols.map(symbol =>{\n\t\t\t\t\t\t\t\t\t\t\tconst counter = tweetCounter.find(count => count.symbol === symbol)\n                        return(\n                            <TagDiv href=\"\" onClick={(event:React.MouseEvent<HTMLAnchorElement>) => {event.preventDefault(); handleDeleteTag(symbol);}}>\n                                <SymbolName>{symbol} <TweetCounter>{counter && counter.mentions} / 10</TweetCounter></SymbolName>\n                            </TagDiv>\n                        )\n                    })\n                }\n            </SymbolTagsDiv>\n        </SelectSymbolsDiv>\n    )\n}\n\nexport default SelectSymbols;"]},"metadata":{},"sourceType":"module"}